/*
//######################################################################################################
//										(c) Copyright Chris_Shang
//                        All Rights Reserved
//
// FILE:	COM_HDProtocol1.c
//
// TITLE:	This function realized the HengDa standerd communication protocol1.
//
// AUTHOR:	CHRIS_SHANG
//
// DATE:	Nov 3,2018
//
// Description: HengDa standerd communication protocol realization.
//

//------------------------------------------------------------------------------------------------------
// Created by: 		
// Created date:   	Nov 3,2018
// Version:
// Descriptions: 	First Version
//
//------------------------------------------------------------------------------------------------------
// Modified by: 		
// Modified date:		
// Version:				
// Descriptions: 		 
//
//------------------------------------------------------------------------------------------------------
//######################################################################################################
*/


/*
********************************************************************************************************
********************************************************************************************************
*/

#if !defined(COM_HD_PROTOCOL_1_H_)
#define COM_HD_PROTOCOL_1_H_

/*
********************************************************************************************************
*	Predefine
********************************************************************************************************
*/
#ifdef		COM_HD_PROTOCOL_1_GLOBAL_
#define		COM_HD_PROTOCOL_1_EXT
#else    
#define		COM_HD_PROTOCOL_1_EXT  extern
#endif


/*
********************************************************************************************************
*	Add include files
********************************************************************************************************
*/
#include "BSP_BasicDataType.h"			// Basic data type define.
#include "UTL_USART.h"

/*
********************************************************************************************************
*	 Macro Defines
********************************************************************************************************
*/


/*
********************************************************************************************************
*	 Const Defines
********************************************************************************************************
*/


/*
********************************************************************************************************
*	 Global data type
********************************************************************************************************
*/

/* HD request frame define */
typedef struct tagHD1_REQ_FRAME
{
  UINT8		m_Head[2];
  UINT8		m_Len;
  UINT8		m_FunCode;
  UINT8		m_Data[7];
  UINT8		m_Resv[2];
  UINT8		m_ChkSum;
}HD1_REQ_FRAME;

/* HD answer format define */
typedef struct tagHD1_ANS_FRAME
{
	UINT8	  m_Head[2];
	UINT8	  m_Len;
	UINT8	  m_IdCode;
	UINT8	  m_FunCode;
	UINT8	  m_Data[7];
	UINT8	  m_Resv[1];
	UINT8	  m_ChkSum;
}HD1_ANS_FRAME;

/* HD Active delivery format define */
typedef struct tagHD1_ACT_FRAME
{
	UINT8	  m_Head[2];
	UINT8	  m_Len;
	UINT8	  m_IdCode;
	UINT8	  m_PosAng[2];
	UINT8	  m_PitAng[2];
	UINT8	  m_LimitInfo;
	UINT8	  m_FalutInfo;
	UINT8	  m_SerialNo;
	UINT8	  m_Resv[2];
	UINT8	  m_ChkSum;
}HD1_ACT_FRAME;

/*
********************************************************************************************************
*	 Global variables
********************************************************************************************************
*/
COM_HD_PROTOCOL_1_EXT HD1_REQ_FRAME g_HD1ReqFrame[SERIAL_PORT_MAX];
COM_HD_PROTOCOL_1_EXT HD1_ANS_FRAME g_HD1AnsFrame[SERIAL_PORT_MAX];
COM_HD_PROTOCOL_1_EXT HD1_ACT_FRAME g_HD1ActFrame[SERIAL_PORT_MAX];


/*
********************************************************************************************************
*	 Externals
********************************************************************************************************
*/

/*
*********************************************************************************************************
*    Local function prototypes
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*    Program Start 
*********************************************************************************************************
*/
COM_HD_PROTOCOL_1_EXT VOID HDProtocol1Loop(SERIAL_PORT port, UINT8 slvAdd);


COM_HD_PROTOCOL_1_EXT BOOL ProcessHDProtocol1Frame(HD1_REQ_FRAME* pReq, HD1_ANS_FRAME* pAns, UINT8 slvAdd);


COM_HD_PROTOCOL_1_EXT VOID HD1ActSend(SERIAL_PORT port, UINT8 slvAdd);

#endif	//#if !defined(XXX_H_)
/*
*********************************************************************************************************
*                                           End of file 
*********************************************************************************************************
*/


