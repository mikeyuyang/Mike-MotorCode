/*
//######################################################################################################
//
// FILE:	COM_TcpServer.c
//
// TITLE:	This function realized the TcpServer funciton(LWIP).
//
// AUTHOR:	Chris.Shang
//
// DATE:	Oct 28, 2017
//
// Description: Set up a TCP Server.
//

//------------------------------------------------------------------------------------------------------
// Created by: 		Chris.Shang
// Created date:   	Feb 3, 2018
// Version:
// Descriptions: 	First Version
//
//------------------------------------------------------------------------------------------------------
// Modified by: 		
// Modified date:		
// Version:				
// Descriptions: 		 
//
//------------------------------------------------------------------------------------------------------
//######################################################################################################
*/

/*
********************************************************************************************************
********************************************************************************************************
*/



#if !defined(COM_TCP_SERVER_H_)
#define COM_TCP_SERVER_H_

/*
********************************************************************************************************
*	Predefine
********************************************************************************************************
*/
#ifdef		COM_TCP_SERVER_GLOBAL_
#define		COM_TCP_SERVER_EXT
#else    
#define		COM_TCP_SERVER_EXT  extern
#endif
#include "BSP_BasicDataType.h"		

typedef struct
{
	UINT8    cmd_head;  //÷°Õ∑
	UINT8    cmd_type;  //√¸¡Ó¿‡–Õ(UPDATE_CONTROL)	
	UINT8    m_AxisEnable1[4];   //
	UINT8    m_AxisEnable2[4];  //
	UINT8    m_AxisEnable3[4];  //
	UINT8    m_CRC[2];
}CTRL_MSG,TCPFUNCTION_CODE;

/*
********************************************************************************************************
*	Add include files
********************************************************************************************************
*/
#include "BSP_BasicDataType.h"			// Basic data type define.


/*
********************************************************************************************************
*	 Macro Defines
********************************************************************************************************
*/


/*
********************************************************************************************************
*	 Const Defines
********************************************************************************************************
*/

/*
********************************************************************************************************
*	 Global data type
********************************************************************************************************
*/

/*
********************************************************************************************************
*	 Global variables
********************************************************************************************************
*/

/*
********************************************************************************************************
*	 Externals
********************************************************************************************************
*/

/*
*********************************************************************************************************
*    Local function prototypes
*********************************************************************************************************
*/

/*
*********************************************************************************************************
*    Program Start 
*********************************************************************************************************
*/

void ModbusTcpServerProcess(int conn);
COM_TCP_SERVER_EXT void InitModbusTcpServer(void);
VOID ProcessModbusTcpFrame(unsigned char* pQueue,TCPFUNCTION_CODE *msg,int conn, UINT8 slvAdd);


#endif	//#if !defined(XXX_H_)
/*
*********************************************************************************************************
*                                           End of file 
*********************************************************************************************************
*/


